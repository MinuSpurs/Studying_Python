import csv

f=open('card.csv',encoding='utf8')
data=csv.reader(f)
next(data)
data=list(data)
----------------------------------------------------------------------------------------------
print(len(data))
----------------------------------------------------------------------------------------------
print(type(data))
----------------------------------------------------------------------------------------------
print(data[0])
----------------------------------------------------------------------------------------------
print(data[:3])
----------------------------------------------------------------------------------------------
print(data[0][5],data[0][6])
----------------------------------------------------------------------------------------------
for row in data:
    print(row)
----------------------------------------------------------------------------------------------
for row in data:
    payment=int(row[6])
    print(payment,type(payment))
----------------------------------------------------------------------------------------------
for row in data:
    date=row[0].split()[0]
    payment=row[6]
    store=row[5]
    print("{} {}에서 {}원 결제".format(date,store,payment))
----------------------------------------------------------------------------------------------
for row in data:
    if row[-1]=='전표매입':
        print('구매확정!')
    else:
        print('구매취소!')
----------------------------------------------------------------------------------------------
spend=0

for row in data:
    payment=int(row[6])
    if row[-1]=='전표매입':
        spend+=payment
print('총 지출액은 {}원 입니다.'.format(spend))
----------------------------------------------------------------------------------------------
s_mon=[0,0,0]

for row in data:
    payment=int(row[6])
    month = int(row[0].split('-')[1])-10
    if row[-1]=='전표매입':
        s_mon[month]+=payment
print(s_mon)
----------------------------------------------------------------------------------------------
import matplotlib.pyplot as plt

s_mon=[0,0,0]

for row in data:
    payment=int(row[6])
    month = int(row[0].split('-')[1])-10
    if row[-1]=='전표매입':
        s_mon[month]+=payment
        
plt.rc('font',family='Malgun Gothic')
plt.title('10~12월 지출현황')
plt.bar(['10월','11월','12월'],s_mon,color='royalblue')
plt.show()
----------------------------------------------------------------------------------------------
taxi = [0,0,0]

for row in data:
    taxi_pay = int(row[6])
    month = int(row[0].split('-')[1])-10
    if row[-1]=='전표매입' and '택시' in row[5]:
        taxi[month] += taxi_pay

plt.rc('font',family='Malgun Gothic')
plt.title('10~12월 택시비 지출 현황')
plt.plot(['10월','11월','12월'],taxi,color='crimson',label='택시비 지출액')
plt.legend()
plt.show()
----------------------------------------------------------------------------------------------
deli = [0,0,0]

for row in data:
    deli_pay = int(row[6])
    month = int(row[0].split('-')[1])-10
    if row[-1]=='전표매입' and '우아한형제들' in row[5]:
        deli[month]+=deli_pay
plt.rc('font',family='Malgun Gothic')
plt.title('10~12월 배달비 지출 현황')
plt.plot(['10월','11월','12월'],deli,color='indigo',label='배달비 지출액')
plt.legend()
plt.show()
----------------------------------------------------------------------------------------------
deli = [0,0,0]

for row in data:
    deli_pay = int(row[6])
    month = int(row[0].split('-')[1])-10
    if row[-1]=='전표매입' and '우아한형제들' in row[5]:
        deli[month]+=deli_pay
        
taxi = [0,0,0]

for row in data:
    taxi_pay = int(row[6])
    month = int(row[0].split('-')[1])-10
    if row[-1]=='전표매입' and '택시' in row[5]:
        taxi[month] += taxi_pay
        
plt.rc('font',family='Malgun Gothic')
plt.title('10~12월 택시비/배달비 지출 현황')
plt.plot(['10월','11월','12월'],deli,color='indigo',label='배달비 지출액')
plt.plot(['10월','11월','12월'],taxi,color='crimson',label='택시비 지출액')
plt.legend()
plt.show()
----------------------------------------------------------------------------------------------
spending={}

for row in data:
    if row[-1]=='전표매입':
        store=row[5]
        pay=int(row[6])
        if store not in spending.keys():
            spending[store]=pay
        else:
            spending[store]+=pay
print(spending)
----------------------------------------------------------------------------------------------
import operator
import matplotlib.pyplot as plt

spending={}

for row in data:
    if row[-1]=='전표매입':
        store=row[5]
        pay=int(row[6])
        if store not in spending.keys():
            spending[store]=pay
        else:
            spending[store]+=pay
            
top10 = sorted(spending.items(), key=operator.itemgetter(1), reverse=True)[:10]
top10_store,top10_amount=[],[]
for t in top10:
    top10_store.append(t[0])
    top10_amount.append(t[1])
plt.rc('font',family='Malgun Gothic')
plt.title('10~12월 지출 TOP 10')
plt.barh(top10_store,top10_amount,color='b')
plt.show()
----------------------------------------------------------------------------------------------
import csv

f=open('card.csv',encoding='utf8')
data=csv.reader(f)
next(data)
data=list(data)

cancle=0

for row in data:
    if '취소' in row[-1]: #if row[-1]!='전표매입' 도 가능함 !! (값 똑같음)
        cancle+=int(row[6])
        
print(cancle)
----------------------------------------------------------------------------------------------
import csv
import matplotlib.pyplot as plt

f=open('card.csv',encoding='utf8')
data=csv.reader(f)
next(data)
data=list(data)

depart=[0,0,0]

for row in data:
    mon=int(row[0].split('-')[1])-10
    spend = int(row[6])
    if row[-1]=='전표매입' and '백화점' in row[5]:
        depart[mon]+=spend

plt.rc('font',family='Malgun Gothic')
plt.title('10~12월 백화점 지출액')
plt.plot(['10월','11월','12월'],depart,label='백화점 지출액',color='crimson')
plt.legend()
plt.show()
